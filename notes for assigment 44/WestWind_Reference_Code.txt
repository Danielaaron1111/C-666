================================================================================
WESTWIND SOLUTION - COMPREHENSIVE REFERENCE CODE
================================================================================

TABLE OF CONTENTS
================================================================================
1.  WestWindSystem\BLL\ShipmentServices.cs
2.  WestWindSystem\BLL\RegionServices.cs
3.  WestWindSystem\BLL\ShipperServices.cs
4.  WestWindSystem\BLL\BuildVersionServices.cs
5.  WestWindSystem\DAL\WestWindContext.cs
6.  WestWindSystem\WestWindExtensions.cs
7.  WestWindApp\Program.cs
8.  WestWindApp\Components\Pages\SamplePages\ShipmentTablePaging.razor
9.  WestWindApp\Components\Pages\SamplePages\RegionSingleQuery.razor
10. WestWindApp\Components\Layout\NavMenu.razor
11. WestWindApp\Components\Pages\Home.razor
12. WestWindApp\appsettings.json

NOTE: WestWindSystem\BLL\JobServices.cs was not found in the solution.

================================================================================
FILE: WestWindSystem\BLL\ShipmentServices.cs
================================================================================
using Microsoft.EntityFrameworkCore;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

#region Additional Namespaces
using WestWindSystem.DAL;
using WestWindSystem.Entities;
#endregion


namespace WestWindSystem.BLL
{
    public class ShipmentServices
    {
        #region setup of the context connection variable and class constructor
        private readonly WestWindContext _context;

        internal ShipmentServices(WestWindContext registeredcontext)
        {
            _context = registeredcontext;
        }
        #endregion

        #region Query Services
        //return all shipments for a particular year/month
        //public List<Shipment> Shipment_GetByYearandMonth(int year, int month)
        //{
        //    //Can one do validation within the service? Yes
        //    //Why: hackers could change the service packet before leaving the
        //    //      the browser
        //    if(year < 1950 || year > DateTime.Today.Year)
        //    {
        //        throw new ArgumentException($"Year {year} is invalid. Year must be between 1950 and today.");
        //    }
        //    if (month < 1 || month > 12)
        //    {
        //        throw new ArgumentException($"Month {month} is invalid. Month must be between 1 and 12.");
        //    }

        //    //attempt to retrieve data from the database
        //    IEnumerable<Shipment> info = _context.Shipments
        //                                        .Where(x => x.ShippedDate.Year == year
        //                                                && x.ShippedDate.Month == month)
        //                                        .OrderBy(x => x.ShippedDate);
        //    return info.ToList();
        //}

        public List<Shipment> Shipment_GetByYearandMonth(int year, int month)
        {

            if (year < 1950 || year > DateTime.Today.Year)
            {
                throw new ArgumentException($"Year {year} is invalid. Year must be between 1950 and today.");
            }
            if (month < 1 || month > 12)
            {
                throw new ArgumentException($"Month {month} is invalid. Month must be between 1 and 12.");
            }

            //This uses the technique (b) discussed on the ShipmentTable page
            //note there is a required using class, see Additional namespaces above.
            //uses the .Include method to add navigational instances to the return record
            //note the predicate uses the virtual navigational property of the Shipment entity
            //This will include the associated record from the Shippers table (parent) for
            //      the shipment record (child)

            //sql:  from tableA inner join tableB on tableA.fkey = tableB.pkey

            IEnumerable<Shipment> info = _context.Shipments
                                                .Include(x => x.ShipViaNavigation)
                                                .Where(x => x.ShippedDate.Year == year
                                                        && x.ShippedDate.Month == month)
                                                .OrderBy(x => x.ShippedDate);
            return info.ToList();
        }
        #endregion
    }
}


================================================================================
FILE: WestWindSystem\BLL\RegionServices.cs
================================================================================
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

#region Additional Namespaces
using WestWindSystem.DAL;
using WestWindSystem.Entities;
#endregion

namespace WestWindSystem.BLL
{
    public class RegionServices
    {
        #region setup of the context connection variable and class constructor
        private readonly WestWindContext _context;

        internal RegionServices(WestWindContext registeredcontext)
        {
            _context = registeredcontext;
        }
        #endregion

        #region Query Services

        //first query will be used to retrieve all the records of the
        //      entity so they may be used in a select control on the
        //      web page
        //this should ONLY be considered IF the entity has very few records (consider 100 as a max)
        //this can be considered IF you need the data as part of your
        //      foreign key display handling on your web page

        //remember methods are your services.
        public List<Region> Region_GetAll()
        {
            //by default the two generic collections used by Linq (Language Integraded Query)
            //  are IQueryAble and IEnumerable
            //within your C# the collection is IEnumerable<T>

            //create a variable to catch the data returned from the
            //  DAL context DbSet property associated with the
            //  Region entity (aka table)
            //
            //the call consists of the context class instance (which is an object)
            //  and the DbSet and optionally any additional Linq methods

            IEnumerable<Region> info = _context.Regions; //all records, unsorted

            //send back an ordered list of regions
            //the collection info is being passed to a Linq method called OrderBy()
            //the OrderBy() method will return a temporary collection
            //      and can be passed to the next method
            //the temporary collection is being passed to the ToList() method
            //the ToList() method will return a List<T> collection
            //that collection is returned from the service method

            //.OrderBy() ascending 1st ordering attribute
            //.OrderDescendingBy() descending 1st ordering attribute
            //.ThenBy() ascending for each additional ordering attribute
            //.ThenDescendingBy() descending for each additional ordering attribute
            //YES: these can be mixed and matched
            return info.OrderBy(x => x.RegionDescription).ToList();
        }

        //looking up a single record given a specific value
        public Region Region_GetByID(int regionid)
        {
            Region info = null;

            //the code within the FirstOrDefault is a predicate
            //the predicate is the condition that is applied to during the methods actions
            //the predicate for this method is the condition to match to find the desired record

            //since the query is based on the pkey of the table, only one record,
            //      if any, should be found
            info = _context.Regions.FirstOrDefault(x => x.RegionID == regionid);
            return info;

            //an alternate way of coding the query
            //notice that the Linq methods can be broken up onto their own lines
            //info = _context.Regions
            //                .Where(x => x.RegionID == regionid)
            //                .FirstOrDefault();
            //return info;

            //an alternate way of coding the query
            //IEnumerable<Region> infoset = _context.Regions
            //                                     .Where(x => x.RegionID == regionid);
            //return infoset.FirstOrDefault();

            // an alternate way of coding the query
            // .Find() searches primary keys therefore just needs the incoming argument
            // since our search is on the primary key, we can use this method
            //return _context.Regions.Find(regionid);
        }
        #endregion
    }
}


================================================================================
FILE: WestWindSystem\BLL\ShipperServices.cs
================================================================================
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

#region Additional Namespaces
using WestWindSystem.DAL;
using WestWindSystem.Entities;
#endregion

namespace WestWindSystem.BLL
{
    public class ShipperServices
    {
        #region setup of the context connection variable and class constructor
        private readonly WestWindContext _context;

        internal ShipperServices(WestWindContext registeredcontext)
        {
            _context = registeredcontext;
        }
        #endregion

        #region Service Queries
        //return a list of shippers
        public List<Shipper> Shipper_GetAll()
        {
            IEnumerable<Shipper> info = _context.Shippers
                                                .OrderBy(x => x.CompanyName);
            return info.ToList();
        }
        #endregion
    }
}


================================================================================
FILE: WestWindSystem\BLL\BuildVersionServices.cs
================================================================================
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

#region Additional Namespaces
using WestWindSystem.DAL;
using WestWindSystem.Entities;
#endregion

namespace WestWindSystem.BLL
{
    public class BuildVersionServices
    {
        #region setup of the context connection variable and class constructor

        //this class will create an instance of the WestWindContext class
        //  everytime that the services is used by the outside user

        //any method (aka service) will probably need access to our database
        //this will be done via the context class (WestWindContext)
        //during the instantiation of this service class, we will create
        //  an instance of the context class
        //we will save this instance in a private variable usable throughout the class
        //during the instantiation of this service class the constructor will
        //  receive as a parameter the registered connection from the IServiceCollection

        private readonly WestWindContext _context;

        internal BuildVersionServices(WestWindContext registeredcontext)
        {
            _context = registeredcontext;
        }
        #endregion

        #region Query Services
        /*********************** Services *****************************/
        // a service is a method
        //this class will be referenced by external users (aka web app)
        //therefore the class and the services need to be public
        public BuildVersion BuildVersion_Get()
        {
            //get the data from the database via the context class property
            /*
            * this will use the context property BuildVersions to obtain the
            *      data from the database via the context class
            *  the call return the dataset (DbSet) from the sql table
            *  data returned by the query in this fashion is returned as a set
            *      with the datatype of IEnumerable<T>, where T is the
            *      name of the entity
            *  the dataset create will contain 0, 1 or more records, one for
            *      each row on your sql table
            */
            //get the data from the database as a collection of records
            IEnumerable<BuildVersion> info = _context.BuildVersions;

            //extract a record from the DbSet collection
            /*
             * data returned is one row from the data placed within info
             * Linq/built-in collection methtods has a method that limits the number of rows from a
             *      data collection: .FirstOrDefault()
             * this method will return the first record in the dataset collection
             * if the collection is empty it will return the default of the datatype
             *  (in this case, it is an instance of a class, thus the default is null)
             */
            return info.FirstOrDefault();
        }
        #endregion
    }
}


================================================================================
FILE: WestWindSystem\DAL\WestWindContext.cs
================================================================================
// <auto-generated> This file has been auto generated by EF Core Power Tools. </auto-generated>
#nullable disable
using System;
using System.Collections.Generic;
using Microsoft.EntityFrameworkCore;
using WestWindSystem.Entities;

namespace WestWindSystem.DAL;

/*
 * the internal access level restricts calls to this class to ONLY other
 *  classes/methods within the library
 */

internal partial class WestWindContext : DbContext
{
    public WestWindContext(DbContextOptions<WestWindContext> options)
        : base(options)
    {
    }

    public virtual DbSet<Address> Addresses { get; set; }

    public virtual DbSet<BuildVersion> BuildVersions { get; set; }

    public virtual DbSet<Category> Categories { get; set; }

    public virtual DbSet<Customer> Customers { get; set; }

    public virtual DbSet<Employee> Employees { get; set; }

    public virtual DbSet<ManifestItem> ManifestItems { get; set; }

    public virtual DbSet<Order> Orders { get; set; }

    public virtual DbSet<OrderDetail> OrderDetails { get; set; }

    public virtual DbSet<Payment> Payments { get; set; }

    public virtual DbSet<PaymentType> PaymentTypes { get; set; }

    public virtual DbSet<Product> Products { get; set; }

    public virtual DbSet<Region> Regions { get; set; }

    public virtual DbSet<Shipment> Shipments { get; set; }

    public virtual DbSet<Shipper> Shippers { get; set; }

    public virtual DbSet<Supplier> Suppliers { get; set; }

    public virtual DbSet<Territory> Territories { get; set; }

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder.UseCollation("Latin1_General_CI_AS");

        modelBuilder.Entity<BuildVersion>(entity =>
        {
            entity.HasKey(e => e.Id).HasName("PK__BuildVer__3214EC07ECBE05E2");

            entity.Property(e => e.ReleaseDate).HasDefaultValueSql("(getdate())");
        });

        modelBuilder.Entity<Customer>(entity =>
        {
            entity.Property(e => e.CustomerID).IsFixedLength();

            entity.HasOne(d => d.Address).WithOne(p => p.Customer)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("FK_Customers_Addresses");
        });

        modelBuilder.Entity<Employee>(entity =>
        {
            entity.Property(e => e.Active)
                .HasDefaultValue(true)
                .HasAnnotation("Relational:DefaultConstraintName", "DF_Employees__Active");
            entity.Property(e => e.OnLeave).HasAnnotation("Relational:DefaultConstraintName", "DF_Employees_OnLeave");

            entity.HasOne(d => d.Address).WithOne(p => p.Employee)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("FK_Employees_Addresses");

            entity.HasOne(d => d.ReportsToNavigation).WithMany(p => p.InverseReportsToNavigation).HasConstraintName("FK_Employees_Employees");

            entity.HasMany(d => d.Territories).WithMany(p => p.Employees)
                .UsingEntity<Dictionary<string, object>>(
                    "EmployeeTerritory",
                    r => r.HasOne<Territory>().WithMany()
                        .HasForeignKey("TerritoryID")
                        .OnDelete(DeleteBehavior.ClientSetNull)
                        .HasConstraintName("FK_EmployeeTerritories_Territories"),
                    l => l.HasOne<Employee>().WithMany()
                        .HasForeignKey("EmployeeID")
                        .OnDelete(DeleteBehavior.ClientSetNull)
                        .HasConstraintName("FK_EmployeeTerritories_Employees"),
                    j =>
                    {
                        j.HasKey("EmployeeID", "TerritoryID").IsClustered(false);
                        j.ToTable("EmployeeTerritories");
                        j.IndexerProperty<string>("TerritoryID").HasMaxLength(20);
                    });
        });

        modelBuilder.Entity<ManifestItem>(entity =>
        {
            entity.HasKey(e => e.ManifestItemID).HasName("PK__Manifest__9000192CED9A3563");

            entity.HasOne(d => d.Product).WithMany(p => p.ManifestItems)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("FK_ManifestItems_ToProducts");

            entity.HasOne(d => d.Shipment).WithMany(p => p.ManifestItems)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("FK_ManifestItems_ToShipments");
        });

        modelBuilder.Entity<Order>(entity =>
        {
            entity.Property(e => e.CustomerID).IsFixedLength();
            entity.Property(e => e.Freight)
                .HasDefaultValue(0m)
                .HasAnnotation("Relational:DefaultConstraintName", "DF_Orders_Freight");
            entity.Property(e => e.Shipped).HasAnnotation("Relational:DefaultConstraintName", "DF__Orders__Shipped__5AEE82B9");

            entity.HasOne(d => d.Customer).WithMany(p => p.Orders)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("FK_Orders_Customers");

            entity.HasOne(d => d.SalesRep).WithMany(p => p.Orders).HasConstraintName("FK_Orders_Employees");

            entity.HasOne(d => d.ShipAddress).WithMany(p => p.Orders).HasConstraintName("FK_Orders_Addresses");
        });

        modelBuilder.Entity<OrderDetail>(entity =>
        {
            entity.Property(e => e.Discount).HasAnnotation("Relational:DefaultConstraintName", "DF_Order_Details_Discount");
            entity.Property(e => e.Quantity)
                .HasDefaultValue((short)1)
                .HasAnnotation("Relational:DefaultConstraintName", "DF_Order_Details_Quantity");
            entity.Property(e => e.UnitPrice).HasAnnotation("Relational:DefaultConstraintName", "DF_Order_Details_UnitPrice");

            entity.HasOne(d => d.Order).WithMany(p => p.OrderDetails)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("FK_Order_Details_Orders");

            entity.HasOne(d => d.Product).WithMany(p => p.OrderDetails)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("FK_Order_Details_Products");
        });

        modelBuilder.Entity<Payment>(entity =>
        {
            entity.HasKey(e => e.PaymentID).HasName("PK_PAY_PayID");

            entity.Property(e => e.Amount).HasAnnotation("Relational:DefaultConstraintName", "DF_PAY_PayAmt_0");
            entity.Property(e => e.PaymentDate)
                .HasDefaultValueSql("(getdate())")
                .HasAnnotation("Relational:DefaultConstraintName", "DF_PAY_PDate_Today");

            entity.HasOne(d => d.Order).WithMany(p => p.Payments)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("FK_Payments_ToTable");

            entity.HasOne(d => d.PaymentType).WithMany(p => p.Payments)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("FK_PAY_PTYP_PayTypeID");
        });

        modelBuilder.Entity<PaymentType>(entity =>
        {
            entity.HasKey(e => e.PaymentTypeID).HasName("PK_PTYP_PayTypeID");

            entity.Property(e => e.PaymentTypeID).ValueGeneratedOnAdd();
        });

        modelBuilder.Entity<Product>(entity =>
        {
            entity.Property(e => e.Discontinued).HasAnnotation("Relational:DefaultConstraintName", "DF_Products_Discontinued");
            entity.Property(e => e.UnitPrice).HasAnnotation("Relational:DefaultConstraintName", "DF_Products_UnitPrice");
            entity.Property(e => e.UnitsOnOrder).HasAnnotation("Relational:DefaultConstraintName", "DF_Products_UnitsOnOrder");

            entity.HasOne(d => d.Category).WithMany(p => p.Products)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("FK_Products_Categories");

            entity.HasOne(d => d.Supplier).WithMany(p => p.Products)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("FK_Products_Suppliers");
        });

        modelBuilder.Entity<Region>(entity =>
        {
            entity.HasKey(e => e.RegionID)
                .HasName("PK_Region")
                .IsClustered(false);

            entity.Property(e => e.RegionDescription).IsFixedLength();
        });

        modelBuilder.Entity<Shipment>(entity =>
        {
            entity.HasKey(e => e.ShipmentID).HasName("PK__Shipment__5CAD378DE98CC61C");

            entity.HasOne(d => d.Order).WithMany(p => p.Shipments)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("FK_Shipments_ToOrders");

            entity.HasOne(d => d.ShipViaNavigation).WithMany(p => p.Shipments)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("FK_Shipments_ToTShippers");
        });

        modelBuilder.Entity<Supplier>(entity =>
        {
            entity.HasOne(d => d.Address).WithOne(p => p.Supplier)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("FK_Suppliers_Addresses");
        });

        modelBuilder.Entity<Territory>(entity =>
        {
            entity.HasKey(e => e.TerritoryID).IsClustered(false);

            entity.Property(e => e.TerritoryDescription).IsFixedLength();

            entity.HasOne(d => d.Region).WithMany(p => p.Territories)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("FK_Territories_Region");
        });

        OnModelCreatingPartial(modelBuilder);
    }

    partial void OnModelCreatingPartial(ModelBuilder modelBuilder);
}


================================================================================
FILE: WestWindSystem\WestWindExtensions.cs
================================================================================

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

#region Additional Namespaces
using Microsoft.EntityFrameworkCore;
using Microsoft.Extensions.DependencyInjection;
using WestWindSystem.BLL;
using WestWindSystem.DAL;
#endregion

namespace WestWindSystem
{
    public static class WestWindExtensions
    {
        //this class can hold an set of extension methods
        //this sample creates an extension method that will add services
        //  to IServiceCollection
        //this method will be called from an separate project to
        //  gain data from the WestWind database
        //In this demo, the call will be done in the WestWindApp Program.cs file
        //this method will do 2 things:
        //  a) register the context connection string
        //  b) register ALL services that I create within the BLL class(es)

        public static void WestWindExtensionServices(this IServiceCollection services,
                Action<DbContextOptionsBuilder> options)
        {
            //handle the connection string
            //add my context class to the services (IServiceCollection)
            //we wish it to use the string I send in on each creation of the
            //      instance of my DbContext class
            services.AddDbContext<WestWindContext>(options);

            //to register a service class you will use the IServiceCollection method
            //  .AddTransient<T> where T is the service class name
            //for any outside user coding that requires access to one or more services
            //  you MUST register the service class, hence all public methods within the class
            //  will be available
            services.AddTransient<BuildVersionServices>((serviceProvider) =>
            {
                //obtain the context information already registered in
                //      IServiceCollection (see above)
                var context = serviceProvider.GetService<WestWindContext>();

                //create an instance of the services class when the service is requested
                //once the class has been registered, it can be used by ANY outside
                //  source as long as the outside source has referenced the extension
                //  class method (see your Program.cs in your wb app)
                return new BuildVersionServices(context);
            });

            services.AddTransient<RegionServices>((serviceProvider) =>
            {
                var context = serviceProvider.GetService<WestWindContext>();
                return new RegionServices(context);
            });
            services.AddTransient<ShipmentServices>((serviceProvider) =>
            {
                var context = serviceProvider.GetService<WestWindContext>();
                return new ShipmentServices(context);
            });
            services.AddTransient<ShipperServices>((serviceProvider) =>
            {
                var context = serviceProvider.GetService<WestWindContext>();
                return new ShipperServices(context);
            });
        }
    }
}


================================================================================
FILE: WestWindApp\Program.cs
================================================================================

using WestWindApp.Components;

#region Additional Namespaces
using Microsoft.EntityFrameworkCore;
using WestWindSystem;
#endregion

var builder = WebApplication.CreateBuilder(args);


//retrieve the connection string from the appsetting.json
//the connection string will be passed to the class library using
//  the encapsulated extension method
//the connection string will be registered to get access to the database
string connectionstring = builder.Configuration.GetConnectionString("WWDB");

//get access to any extended services
//gain access to any available services that have been registered in IServiceCollections
//the technique used in this example has the registrations encapsulated
//  within the class library via an extension method
//technically, you could put all the setup that is in the extension method
//  here in this file
builder.Services.WestWindExtensionServices(options => options.UseSqlServer(connectionstring));


// Add services to the container.
builder.Services.AddRazorComponents()
    .AddInteractiveServerComponents();

var app = builder.Build();

// Configure the HTTP request pipeline.
if (!app.Environment.IsDevelopment())
{
    app.UseExceptionHandler("/Error", createScopeForErrors: true);
}


app.UseAntiforgery();

app.MapStaticAssets();
app.MapRazorComponents<App>()
    .AddInteractiveServerRenderMode();

app.Run();


================================================================================
FILE: WestWindApp\Components\Pages\SamplePages\ShipmentTablePaging.razor
================================================================================
@page "/tablequery"
<PageTitle>Table Query with Paging</PageTitle>
@rendermode InteractiveServer

<!-- additional namespaces-->
@using WestWindSystem.BLL;
@using WestWindSystem.Entities;

<h1>Shipment Table with Paging</h1>
<cite>... non primary key filter search</cite>
<br/>
@if (feedBackMsg.Length > 0)
{
    <div class="alert alert-info">
        <p>@feedBackMsg</p>
    </div>
}
<br />
<br />
@if (errorMsgs.Count > 0)
{
    <div class="alert alert-danger">
        <p>Please fix the following issues:</p>
        <ul>
            @foreach (var error in errorMsgs)
            {
                <li>@error</li>
            }
        </ul>
    </div>
}
<br />
<div class="row">
    <div class="col-md-3">
        <label for="yearid">Enter a shipment year:</label>&nbsp;&nbsp;
        <input id="yearid" type="number" @bind="yeararg"
               style="width: 100px;" />
        <br /><br />
        <label for="monthid">Enter a shipment month:</label>&nbsp;&nbsp;
        <input id="monthid" type="number" @bind="montharg"
               style="width: 100px;" />
        <br /><br />
        <button type="submit" @onclick="GetShipments"
                class="btn btn-outline-primary rounded-pill"
                style="width: 170px;">
            Fetch Shipments
        </button>
    </div>
    <div class="col-md-8">
        @if (shipmentList == null)
        {
            <!-- a -->
            <p>Enter a year and month for your search.</p>
        }
        else if (shipmentList.Count == 0)
        {
            <!-- b -->
            <p>No data found for year @yeararg and month @montharg.</p>
        }
        else
        {
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Order</th>
                        <th>Date</th>
                        <th>shipper</th>
                        <!-- align="right" does not work on column headers-->
                        <th>Freight $</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach(var item in shipmentList)
                    {
                        <tr>
                            <td>@item.ShipmentID</td>
                            <td>@item.OrderID</td>
                            <td>@item.ShippedDate.ToString("MMM dd, yyyy")</td>
                            @* <td>@item.ShipVia</td> *@
                            @* use the navigational property of the shipment
                                    instance to obtain data from the associated
                                    instance

                            *@
                            <td>@item.ShipViaNavigation.CompanyName</td>
                            <td align="right">@string.Format("{0:#,##0.00}",item.FreightCharge)</td>
                        </tr>
                    }
                </tbody>
            </table>
        }
    </div>
</div>

@code {
    private string feedBackMsg = "";
    private List<string> errorMsgs = new();

    // bind variables
    private int yeararg = 0;
    private int montharg = 0;
    private List<Shipment> shipmentList = null;

    //injected services
    [Inject]
    public ShipmentServices _shipmentServices { get; set; }

    //navigationsal matching
    [Inject]
    public ShipperServices _shipperServices { get; set; }
    private List<Shipper> shipperList = null;

    protected override void OnInitialized()
    {
        base.OnInitialized();

        //custom initialization
        yeararg = DateTime.Today.Year;
        montharg = DateTime.Today.Month;

        //there are two techniques to allow the use of navigational properties on your page
        //      a) bring in a dataset of the table to which you are attempting to navigate
        //      b) use the .Include method on the query itself (see Shipment query
        //          for this technique in BLL ShipmentServices)

        // Technique (a)
        // this data set is needed to handle the navigation reference used on the table data cell
        //           to display the shipper company name
        // no other coding is needed, the system will match up the dataset to the usage in the
        //     table above
       // shipperList = _shipperServices.Shipper_GetAll();
    }

    //button event handling
    private void GetShipments()
    {
        //clear old messages and data
        feedBackMsg ="";
        errorMsgs.Clear();
        shipmentList = null;

        //validate incoming argument values
        //definitely validate if the user can enter data values
        //optionally if the data is from a list produce by
        //  the program of a volid collection. Usually done
        //  if there is a prompt on the selection list
        //Also if there is a set limit or range

        if (yeararg < 1950 || yeararg > DateTime.Today.Year)
        {
            errorMsgs.Add($"Invalid year {yeararg}. Year must be between 1950 and {DateTime.Today.Year}");
        }
        if (montharg < 1 || montharg > 12)
        {
            errorMsgs.Add($"Invalid month {montharg}. Month must be between 1 and 12");
        }

        //can I proceed with the query?
        if( errorMsgs.Count == 0)
        {
            //assume the incoming data values are good
            //consume the need query service

            //since the application is leaving this app to another location
            //   and that location could throw an exception, remember to
            //   use try/catch
            try
            {
                //consume the service method
                shipmentList = _shipmentServices.Shipment_GetByYearandMonth(yeararg, montharg);

            }
            catch(Exception ex)
            {
                errorMsgs.Add($"System Error: {ex.Message}");
            }
        }
    }//eom

}


================================================================================
FILE: WestWindApp\Components\Pages\SamplePages\RegionSingleQuery.razor
================================================================================
@page "/singlequery"
<PageTitle>Single Query</PageTitle>

<!-- Additional Namespaces-->
@using WestWindSystem.BLL
@using WestWindSystem.Entities

<!--
    REMEMBER!!!!!!!!!!!!!!!!!!!!!!!!!!
    You need the following statement so your buttons will respond
-->
@rendermode InteractiveServer

<h1>Region: Single Query</h1>
<cite>... a single record query to the database</cite>
<br/>
<br/>
@if (feedBackMsg.Length > 0)
{
    <div class="alert alert-info">
        <p>@feedBackMsg</p>
    </div>
}
<br />
<br />
@if (errorMsgs.Count > 0)
{
    <div class="alert alert-danger">
        <p>Please fix the following issues:</p>
        <ul>
            @foreach (var error in errorMsgs)
            {
                <li>@error</li>
            }
        </ul>
    </div>
}
<br />
<br />
<!-- create the form for the query-->
@*
    form area
        standard html controls
        use bootstrap for formatting
        form will be two column
*@
<div class="row">
    <div class="col-md-6">
        <!-- this column will hold the query input controls and buttons-->
        <p><strong>Input query controls and buttons</strong></p>

        <!-- the user will have to entered the search value -->
        <label for="regionid">Enter a region id:</label>&nbsp;&nbsp;
        <input id="regionid" type="number" @bind="entryarg"
               style="width: 100px;" />&nbsp;&nbsp;
        <button type="submit" @onclick="GetByEntry"
                class="btn btn-outline-primary rounded-pill"
                style="width: 170px;">
            Fetch By Entry
        </button>
        <br/><br/>
        <!-- the user will select the search value from a given list -->
        <label for="selectid">Select a region:</label>&nbsp;&nbsp;
        <select id="selectid" @bind="selectionarg">
            <option value="0">... select ...</option>
            <!--
                this collection for the loop will be a collection returned
                    from the database
                remember this should ONLY be consider IF your collection
                    for the control is small, consider an upper limit of 100 records
            -->
            @foreach (var item in regionList)
            {
                <option value="@item.RegionID">@item.RegionDescription</option>
            }
        </select>&nbsp;&nbsp;
        <button type="submit" @onclick="GetBySelection"
                class="btn btn-outline-secondary rounded-pill"
                style="width: 170px;">
            Fetch By Selection
        </button>
    </div>

    <div class="col-md-6">
        <!-- this column will hold the query result output
             no output attempt will be done unless the page actually
                has something to display
        -->
        <p>this column is the output from the database</p>
        <br/>
        @if(info != null)
        {
            <p>Region id: @info.RegionID</p><br/>
            <p>Region Description: @info.RegionDescription</p>
        }
    </div>
</div>
@code {
    private string feedBackMsg = "";
    private List<string> errorMsgs = new();

    //variables for binding
    private int entryarg = 0;
    private int selectionarg = 0;

    //variables for holding database returned data
    private List<Region> regionList = new();
    private Region info = null;

    //inject any needed service classes
    [Inject]
    public RegionServices _regionServices { get; set; }


    protected override void OnInitialized()
    {
        base.OnInitialized();

        //load the collection required by the select control
        //  so that the options appear
        regionList = _regionServices.Region_GetAll();
    }

    //onclick event methods
    public void GetByEntry()
    {
        //clear old messages
        feedBackMsg = "";
        errorMsgs.Clear();

        //validate incoming data
        if (entryarg <= 0)
        {
            //your message can be either in the feedbackMsg or errorMsgs
            feedBackMsg = $"Region id {entryarg} is invalid. Region id must be greater than 0";
        }
        else
        {
            //data appears to be valid

            //remember that you are leaving this project to another system
            //  which could possible throw an exception
            //this means that as you consume a service you should remember to
            //  implement user friendly error handling

            try
            {
                //consume a service to find the database data
                info = _regionServices.Region_GetByID(entryarg);

                //remember to communicate results with the user
                if (info == null)
                {
                    feedBackMsg = $"Region id {entryarg} is not on file";
                }
            }
            catch(Exception ex)
            {
                errorMsgs.Add($"System error: {ex.Message}");
            }
        }
    }

    public void GetBySelection()
    {
        //clear old messages
        feedBackMsg = "";
        errorMsgs.Clear();

        //validate incoming data
        if (selectionarg == 0)  //is the dropdownlist still on the prompt line?
        {
            //your message can be either in the feedbackMsg or errorMsgs
            feedBackMsg = $"You must select a region to view";
        }
        else
        {
            //data appears to be valid

            //remember that you are leaving this project to another system
            //  which could possible throw an exception
            //this means that as you consume a service you should remember to
            //  implement user friendly error handling

            try
            {
                //consume a service to find the database data
                info = _regionServices.Region_GetByID(selectionarg);

                //remember to communicate results with the user
                if (info == null)
                {
                    feedBackMsg = "Selected region is not on file";
                }
            }
            catch (Exception ex)
            {
                errorMsgs.Add($"System error: {ex.Message}");
            }
        }
    }
}


================================================================================
FILE: WestWindApp\Components\Layout\NavMenu.razor
================================================================================
<div class="top-row ps-3 navbar navbar-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="">WestWindApp</a>
    </div>
</div>

<input type="checkbox" title="Navigation menu" class="navbar-toggler" />

<div class="nav-scrollable" onclick="document.querySelector('.navbar-toggler').click()">
    <nav class="nav flex-column">
        <div class="nav-item px-3">
            <NavLink class="nav-link" href="" Match="NavLinkMatch.All">
                <span class="bi bi-house-door-fill-nav-menu" aria-hidden="true"></span> Home
            </NavLink>
        </div>

        <div class="nav-item px-3">
            <NavLink class="nav-link" href="counter">
                <span class="bi bi-plus-square-fill-nav-menu" aria-hidden="true"></span> Counter
            </NavLink>
        </div>

        <div class="nav-item px-3">
            <NavLink class="nav-link" href="weather">
                <span class="bi bi-list-nested-nav-menu" aria-hidden="true"></span> Weather
            </NavLink>
        </div>

        <div class="nav-item px-3">
            <NavLink class="nav-link" href="singlequery">
                <span class="bi bi-list-nested-nav-menu" aria-hidden="true"></span> Single Query
            </NavLink>
        </div>

        <div class="nav-item px-3">
            <NavLink class="nav-link" href="tablequery">
                <span class="bi bi-list-nested-nav-menu" aria-hidden="true"></span> Table Query
            </NavLink>
        </div>
    </nav>
</div>



================================================================================
FILE: WestWindApp\Components\Pages\Home.razor
================================================================================
@page "/"
<PageTitle>Home</PageTitle>

<!-- Additional Namespaces-->
@using WestWindSystem.BLL
@using WestWindSystem.Entities

<h1>Hello, world!</h1>

Welcome to your new app.

<p>WestWind database version</p>
<p>Major: @buildVersion.Major</p>
<p>MInor: @buildVersion.Minor</p>
<p>Build: @buildVersion.Build</p>
<p>Release Date: @buildVersion.ReleaseDate.ToString("MMM dd, yyyy")</p>


@code {
    //any service class that is not part of the C# defaults need to be injected
    //since your services are extension services they are not part of the defaults
    //  which means you have to inject the services
    //one injects a class of services
    //once the service class has been injected, the program will have access to
    //  all service methods within the class

    //property injection
    [Inject]
    public BuildVersionServices _buildVersionServices { get; set; }

    //variable to capture the returned data from the service method
    BuildVersion buildVersion { get; set; }

    protected override void OnInitialized()
    {
        //default initialization of your page
        base.OnInitialized();

        //custom initialization
        //consume a service method
        //    a) the service class (injected)
        //    b) the service method
        //    c) does the service method have arguments than need to be supplied
        //    d) returned data
        buildVersion = _buildVersionServices.BuildVersion_Get();

    }
}


================================================================================
FILE: WestWindApp\appsettings.json
================================================================================
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  //this setting variable will indicate the connection string for the
  //  application
  //the string needs the following:
  //  server name
  //  database name
  //  any other additional connection option
  //NOTE: you may run into an encryption problem or trusted certificate problem
  //Solution: for the encryption problem, add the parameter encrypt=false
  //          for the certificate problem, add the parameter TrustServerCertificate=false
  "ConnectionStrings": {
    "WWDB": "Server=.;Database=WestWind;Trusted_Connection=true;MultipleActiveResultSets=true;encrypt=false"
  }
}


================================================================================
END OF WESTWIND SOLUTION REFERENCE CODE
================================================================================
